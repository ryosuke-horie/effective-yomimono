# RSS読み込み機能要件

## 機能要件一覧

### 1. RSSフィード管理機能

#### 1.1 RSSフィード登録
- フロントエンドから新規RSSフィードURLを登録できる
- 登録時にフィード名称を設定できる
- 登録時にフィードの有効/無効を設定できる（デフォルト：有効）
- 登録時にフィードの妥当性をチェックする（正しいRSSフォーマットか）

#### 1.2 RSSフィード編集
- 登録済みフィードのURL、名称を編集できる
- フィードの有効/無効を切り替えできる

#### 1.3 RSSフィード削除
- 登録済みフィードを削除できる
- 削除時でも関連する自動登録済みブックマークは保持される

#### 1.4 RSSフィード一覧表示
- 登録済みフィードの一覧を表示できる
- 以下の情報を表示する
  - フィード名称
  - フィードURL
  - 有効/無効状態
  - 最終更新日時
  - 取得記事数
  - 次回更新予定時刻

### 2. 自動記事取得機能

#### 2.1 定期実行
- Cron triggerで設定された間隔で自動実行される
- 実行頻度は1日1回で固定
- 実行時刻は分散させる（一斉実行を避ける）

#### 2.2 RSSフィード解析
- 各RSSフィードからXMLデータを取得する
- RSS 2.0、Atom 1.0形式に対応する
- エラー時は適切にハンドリングし、次のフィードの処理を継続する

#### 2.3 新着記事検出
- 最終取得日時以降の新着記事を検出する
- URLの重複チェックを行う（既存ブックマークとの照合）
- 1フィードあたりの取得上限を設定（デフォルト：10記事/回）

#### 2.4 記事情報抽出
- 以下の情報を取得する
  - タイトル
  - URL
  - 概要（description）
  - 公開日時
  - カテゴリ/タグ（存在する場合）

### 3. ブックマーク自動登録機能

#### 3.1 ブックマーク作成
- 新着記事を自動的にブックマークとして登録する
- 以下の情報を保存する
  - タイトル
  - URL
  - 説明文（RSS descriptionより）
  - 作成日時（RSS公開日時）
  - RSSフィードID（参照元）

#### 3.2 ステータス管理
- 自動登録されたブックマークは「未読」ステータスで作成
- 手動登録のブックマークと区別できるようフラグを設定


### 4. フロントエンド機能

#### 4.1 RSS管理画面
- RSSフィードの一覧表示
- 新規フィード登録フォーム
- フィード編集・削除機能
- フィード有効/無効切り替え

#### 4.2 自動取得記事の表示
- 自動取得された記事を未読一覧で確認可能
- RSS由来の記事であることを視覚的に識別可能
- フィード別でフィルタリング可能

### 5. バッチ処理機能

#### 5.1 実行管理
- バッチ実行履歴の記録
- エラー発生時のログ記録
- 実行時間の監視（タイムアウト設定）

#### 5.2 エラーハンドリング
- フィード取得エラー時の再試行（最大3回）
- 部分的な失敗時も他のフィードの処理を継続

## 非機能要件

### パフォーマンス要件
- 1フィードあたりの処理時間：30秒以内
- 同時処理フィード数：最大10フィード
- API応答時間：2秒以内

### セキュリティ要件
- RSSフィードURLのバリデーション（XSS対策）
- 外部サイトへのアクセス時のタイムアウト設定
- APIエンドポイントの認証

### 可用性要件
- バッチ処理失敗時の自動復旧
- 部分的な失敗の許容（他のフィード処理は継続）
- 手動実行のトリガー機能